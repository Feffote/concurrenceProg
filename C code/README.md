Notice that if you run this in an up-to-date Windows enviroment the semaphores will run in background 
even if you don't implement them, so try it in a Linux machine to appreciate the collision problem with the threads
and then solve this with *thread_with_semaphores.c*
